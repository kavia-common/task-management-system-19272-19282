{"is_source_file": true, "format": "TypeScript", "description": "This file defines a Vue composable that manages user authentication state, including login, signup, fetching user profile, and logout functionalities. It interacts with localStorage for token persistence and communicates with an API for authentication operations.", "external_files": ["./useApi", "~/types"], "external_methods": ["useApi()", "navigateTo()"], "published": ["useAuth"], "classes": [], "methods": [{"name": "export function useAuth() { useAuth", "description": "Provides reactive authentication state and methods for login, signup, fetching user info, and logout.", "scope": "", "scopeKind": ""}, {"name": "login", "description": "Performs user login by calling the API, storing the token, and fetching user profile."}, {"name": "signup", "description": "Performs user registration and subsequently logs in the new user."}, {"name": "fetchMe", "description": "Fetches current user profile from API, handles token invalidation on failure."}, {"name": "setToken", "description": "Stores the authentication token in state and localStorage."}, {"name": "clearToken", "description": "Removes the authentication token from state and localStorage."}, {"name": "logout", "description": "Logs out the user by clearing tokens and optional redirection to login page."}], "calls": ["useApi()", "api()", "handle()", "localStorage.getItem()", "localStorage.setItem()", "localStorage.removeItem()", "navigateTo()"], "search-terms": ["vue composable", "useAuth", "auth token management", "localStorage token", "fetch user profile", "login api call", "signup process", "logout functionality"], "state": 2, "file_id": 10, "knowledge_revision": 21, "git_revision": "", "ctags": [{"_type": "tag", "name": "TOKEN_KEY", "path": "/home/kavia/workspace/code-generation/task-management-system-19272-19282/todo_frontend/composables/useAuth.ts", "pattern": "/^const TOKEN_KEY = 'todo_jwt_token';$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "_loadedUser", "path": "/home/kavia/workspace/code-generation/task-management-system-19272-19282/todo_frontend/composables/useAuth.ts", "pattern": "/^const _loadedUser = ref(false);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "_token", "path": "/home/kavia/workspace/code-generation/task-management-system-19272-19282/todo_frontend/composables/useAuth.ts", "pattern": "/^const _token = ref<string | null>(process.client ? localStorage.getItem(TOKEN_KEY) : null);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "_user", "path": "/home/kavia/workspace/code-generation/task-management-system-19272-19282/todo_frontend/composables/useAuth.ts", "pattern": "/^const _user = ref<User | null>(null);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "api", "path": "/home/kavia/workspace/code-generation/task-management-system-19272-19282/todo_frontend/composables/useAuth.ts", "pattern": "/^  const { api, handle } = useApi();$/", "language": "TypeScript", "kind": "constant", "scope": "useAuth", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/task-management-system-19272-19282/todo_frontend/composables/useAuth.ts", "pattern": "/^    const data = await handle<LoginResponse>(api('\\/auth\\/login', {$/", "language": "TypeScript", "kind": "constant", "scope": "useAuth", "scopeKind": "function"}, {"_type": "tag", "name": "handle", "path": "/home/kavia/workspace/code-generation/task-management-system-19272-19282/todo_frontend/composables/useAuth.ts", "pattern": "/^  const { api, handle } = useApi();$/", "language": "TypeScript", "kind": "constant", "scope": "useAuth", "scopeKind": "function"}, {"_type": "tag", "name": "isAuthenticated", "path": "/home/kavia/workspace/code-generation/task-management-system-19272-19282/todo_frontend/composables/useAuth.ts", "pattern": "/^  const isAuthenticated = computed(() => !!_token.value && !!_user.value);$/", "language": "TypeScript", "kind": "constant", "scope": "useAuth", "scopeKind": "function"}, {"_type": "tag", "name": "me", "path": "/home/kavia/workspace/code-generation/task-management-system-19272-19282/todo_frontend/composables/useAuth.ts", "pattern": "/^      const me = await api<User>('\\/auth\\/me', { method: 'GET' });$/", "language": "TypeScript", "kind": "constant", "scope": "useAuth", "scopeKind": "function"}, {"_type": "tag", "name": "token", "path": "/home/kavia/workspace/code-generation/task-management-system-19272-19282/todo_frontend/composables/useAuth.ts", "pattern": "/^  const token = computed(() => _token.value);$/", "language": "TypeScript", "kind": "constant", "scope": "useAuth", "scopeKind": "function"}, {"_type": "tag", "name": "useAuth", "path": "/home/kavia/workspace/code-generation/task-management-system-19272-19282/todo_frontend/composables/useAuth.ts", "pattern": "/^export function useAuth() {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "user", "path": "/home/kavia/workspace/code-generation/task-management-system-19272-19282/todo_frontend/composables/useAuth.ts", "pattern": "/^  const user = computed(() => _user.value);$/", "language": "TypeScript", "kind": "constant", "scope": "useAuth", "scopeKind": "function"}, {"_type": "tag", "name": "userLoaded", "path": "/home/kavia/workspace/code-generation/task-management-system-19272-19282/todo_frontend/composables/useAuth.ts", "pattern": "/^  const userLoaded = computed(() => _loadedUser.value);$/", "language": "TypeScript", "kind": "constant", "scope": "useAuth", "scopeKind": "function"}], "hash": "f60a9ea45686b1e4797db691c08c7914", "format-version": 4, "code-base-name": "todo_frontend", "filename": "todo_frontend/composables/useAuth.ts", "revision_history": [{"21": ""}]}